<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>JAVA8 메소드 레퍼런스(Method Reference) | Dolen’s blog</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="JAVA8 메소드 레퍼런스(Method Reference)" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="JAVA8 Method Reference" /> <meta property="og:description" content="JAVA8 Method Reference" /> <link rel="canonical" href="http://localhost:4000/java-method-reference/" /> <meta property="og:url" content="http://localhost:4000/java-method-reference/" /> <meta property="og:site_name" content="Dolen’s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2016-12-10T05:00:00+09:00" /> <script type="application/ld+json"> {"description":"JAVA8 Method Reference","@type":"BlogPosting","url":"http://localhost:4000/java-method-reference/","headline":"JAVA8 메소드 레퍼런스(Method Reference)","dateModified":"2016-12-10T05:00:00+09:00","datePublished":"2016-12-10T05:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/java-method-reference/"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> --> <link rel="stylesheet" href="/css/main.css"> <link rel="alternate" type="application/rss+xml" title="Dolen's blog" href="http://localhost:4000/feed.xml"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> </head> <body> <header class="site-header"> <nav class="navbar navbar-default"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Dolen's blog</a> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1"> <ul class="nav navbar-nav navbar-right"> <li><a href="/about/">About</a></li> <li><a href="/contact/">Contact</a></li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav> </header> <div id="container" class="container"> <div class="wrapper"> <div class="row" style="position: relative;"> <div class="col-md-8"> <article id="post" class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">JAVA8 메소드 레퍼런스(Method Reference)</h1> <p class="post-meta"><time datetime="2016-12-10T05:00:00+09:00" itemprop="datePublished">Dec 10, 2016</time></p> </header> <div class="post-content" itemprop="articleBody"> <h3 id="java8-method-reference">JAVA8 Method Reference</h3> <p>메소드 참조와 생성자 참조에 대해서 알아보도록 하겠습니다.<br /> 우리는 람다 표현식에서 알아보았듯이, 구현해야 하는 메소드의 본문을 람다 표현식으로 (익명클래스로 생성되도록 하는) 대체할 수 있다는 것을 알았습니다.<br /> 하지만, 이미 우리가 구현하고자 하는 람다식 자체가 구현되어있는 경우가 있습니다.<br /> 이럴때 사용하는 메서드 참조용 특수 문법이 있는데, 이 방식을 메소드 참조라고 표현합니다. <br /> <br /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">String</span> <span class="o">[]</span> <span class="n">strings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span> <span class="o">[]</span> <span class="o">{</span>
    <span class="s">"6"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"1"</span>
<span class="o">};</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">strings</span><span class="o">);</span>

<span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">strings</span><span class="o">)</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</code></pre></div></div> <p>일단 간단한 예제를 하나 적어보았습니다.<br /> 한창 자바 코딩할때에는 하루에도 수십번씩 적었던 코드들이죠.<br /> 리스트를 순회하며 요소를 출력하는 단순한 예제 코드 입니다.</p> <p>하지만 반복적인 for문의 사용과 iterator는 굉장히 지치게 하죠.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">default</span> <span class="kt">void</span> <span class="nf">forEach</span><span class="o">(</span><span class="n">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">T</span> <span class="n">t</span> <span class="o">:</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">action</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>그래서 자바8의 ArrayList 클래스에는 각 요소에 함수를 적용하는 forEach 메소드를 지원합니다.</p> <p>코드를 조금 수정해 볼까요 ? <br /> <br /> <br /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">String</span> <span class="o">[]</span> <span class="n">strings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span> <span class="o">[]</span> <span class="o">{</span>
    <span class="s">"6"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"1"</span>
<span class="o">};</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">strings</span><span class="o">);</span>

<span class="n">list</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span><span class="o">));</span>
</code></pre></div></div> <p>이런식으로 간결해 지는것을 볼 수 있습니다.<br /> 하지만, 결과적으로 따지고 본다면, forEach메소드는 매개변수로 Consumer interface를 전달받죠. <br /> 물론 우리는 람다식을 이용하여, Consumer가 가지고있는 accept 메소드 구현체를 직접 전달함으로써 해결하고 있지만<br /> 지금 우리가 전달함 람다식의 내용은 list의 요소를 입력받아, 단순히 println메소드에 전달해주는 역할만 하고 있게 되는것이지요.<br /> 즉, Consumer가 구현해야 되는 accept메소드가 실행될때 println메소드를 한번더 실행해주는 형태라고 보시면 될 것 같습니다.<br /> 그렇다면 결국 메소드의 call stack이 1depth 깊어진 결과라고 보여지는데요, 그냥 System클래스가 가진 println메소드를 forEach에게 전달할 순 없을까요?<br /> <br /></p> <p>그게바로 <code class="highlighter-rouge">메소드 참조</code> 입니다.<br /> <br /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">String</span> <span class="o">[]</span> <span class="n">strings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span> <span class="o">[]</span> <span class="o">{</span>
    <span class="s">"6"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"1"</span>
<span class="o">};</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">strings</span><span class="o">);</span>

<span class="n">list</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</code></pre></div></div> <p>이렇게 표현해 주는 것만으로, forEach에게 println을 전달해 주게 되는것이지요.<br /> 이러한 예에서 볼 수 있듯이 :: 연산자는 메소드 이름과 클래스를 분리하거나, 메소드 이름과 객체의 이름을 분리합니다.<br /> 이는 다음과 같이 세 가지 형태로 사용할 수 있습니다.</p> <blockquote> <p>1. 클래스::인스턴스메소드 (public)</p> <p>2. 클래스::정적메소드 (static)</p> <p>3. 객체::인스턴스메소드 (new)</p> </blockquote> <p><code class="highlighter-rouge">첫 번째 형태에서는 첫번째 파라미터가 메소드의 수신자가 되고, 나머지 파라미터는 해당 메소드로 전달 됩니다.</code><br /> ex) String::compareToIgnoreCase는 (x, y) -&gt; x.compareToIgnoreCase(y) 와 같습니다.</p> <p><code class="highlighter-rouge">두 번째 형태에서는 모든 파라미터가 정적 메소드로 전달됩니다.</code> <br /> ex) Object::isNull은 x -&gt; Object.isNull(x) 와 같습니다.</p> <p><code class="highlighter-rouge">세 번째 형태에서는 주어진 객체에서 메소드가 호출되며 파라미터는 인스턴스 메소드로 전달 됩니다.</code><br /> ex) System.out::println은 x -&gt; System.out.println(x)와 동일합니다.</p> <p>즉 우리는 세 번째 방식인 객체의 인스턴스 메소드를 전달해준 셈이지요. :) <br /></p> <h4 id="생성자-참조">생성자 참조</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Data</span>
<span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">()</span> <span class="o">{}</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">gender</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">gender</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>일단 클래스를 하나 생성해볼까요.<br /> person 클래스를 생성하여 사용하는 방법은, 생성자에 정의된 방법과 동일 합니다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Person</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
<span class="n">Person</span> <span class="n">member1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"dolen1"</span><span class="o">);</span>
<span class="n">Person</span> <span class="n">member2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"dolen2"</span><span class="o">,</span> <span class="s">"man"</span><span class="o">);</span>
</code></pre></div></div> <p>이렇게 사용할 수 있겠지요 ?<br /> 하지만 우리는 람다식을 배웠기 때문에 이 식을 이렇게도 표현할 수 있다는 것을 알고 있습니다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Person</span><span class="o">&gt;</span> <span class="n">myFunction</span> <span class="o">=</span> <span class="n">name</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</code></pre></div></div> <p>또한 생성자는 메소드라는 것을 자바를 공부했다면 알고 계셔야 하는 부분 중 하나이지요?<br /> 따라서 생성자 메소드 또한 메소드 참조를 할 수 있습니다. :)</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Person</span><span class="o">&gt;</span> <span class="n">myFunction</span> <span class="o">=</span> <span class="nl">Person:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>
<span class="n">myFunction</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"dolen"</span><span class="o">);</span>

<span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Person</span><span class="o">&gt;</span> <span class="n">myFunction1</span> <span class="o">=</span> <span class="nl">Person:</span><span class="o">:</span><span class="k">new</span><span class="o">;</span>
<span class="n">myFunction1</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="s">"dolen"</span><span class="o">,</span> <span class="s">"man"</span><span class="o">);</span>
</code></pre></div></div> <p>이렇게 말이죠 !<br /> 당연히 메소드 참조이기때문에, 메소드의 오버로딩이 적용된다는 점은 기본이겠지요 ?</p> <h4 id="자주-사용하는-함수형-인터페이스">자주 사용하는 함수형 인터페이스</h4> <table class="table table-striped table-hover"> <thead> <tr> <th style="text-align: center">함수형 인터페이스</th> <th style="text-align: center">파라미터타입</th> <th style="text-align: center">반환 타입</th> <th style="text-align: center">추상 메서드 이름</th> <th style="text-align: center">설명</th> <th style="text-align: center">다른 메소드</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">Runnable</td> <td style="text-align: center">없음</td> <td style="text-align: center">void</td> <td style="text-align: center">run</td> <td style="text-align: center">인자나 반환 값 없이 액션을 수행한다.</td> <td style="text-align: center">없음</td> </tr> <tr> <td style="text-align: center">Supplier<T></T></td> <td style="text-align: center">없음</td> <td style="text-align: center">T</td> <td style="text-align: center">get</td> <td style="text-align: center">T 타입 값을 공급한다.</td> <td style="text-align: center">없음</td> </tr> <tr> <td style="text-align: center">Consumer<T></T></td> <td style="text-align: center">T</td> <td style="text-align: center">void</td> <td style="text-align: center">accept</td> <td style="text-align: center">T 타입 값을 소비한다.</td> <td style="text-align: center">andThen</td> </tr> <tr> <td style="text-align: center">BiConsumer&lt;T, U&gt;</td> <td style="text-align: center">T, U</td> <td style="text-align: center">void</td> <td style="text-align: center">accept</td> <td style="text-align: center">T와 U타입 값을 소비한다.</td> <td style="text-align: center">andThen</td> </tr> <tr> <td style="text-align: center">Function&lt;T, R&gt;</td> <td style="text-align: center">T</td> <td style="text-align: center">R</td> <td style="text-align: center">apply</td> <td style="text-align: center">T 타입 인자를 받는 함수다.</td> <td style="text-align: center">compose<br />andThen<br />identity</td> </tr> <tr> <td style="text-align: center">BiFunction&lt;T, U, R&gt;</td> <td style="text-align: center">T, U</td> <td style="text-align: center">R</td> <td style="text-align: center">apply</td> <td style="text-align: center">T와 U타입 인자를 받는 함수다.</td> <td style="text-align: center">andThen</td> </tr> <tr> <td style="text-align: center">UnaryOperator<T></T></td> <td style="text-align: center">T</td> <td style="text-align: center">T</td> <td style="text-align: center">apply</td> <td style="text-align: center">T 타입에 적용하는 단항 연산자다.</td> <td style="text-align: center">compose<br />andThen<br />identity</td> </tr> <tr> <td style="text-align: center">BinaryOperator<T></T></td> <td style="text-align: center">T, T</td> <td style="text-align: center">T</td> <td style="text-align: center">apply</td> <td style="text-align: center">T 타입에 적용하는 이항 연산자다.</td> <td style="text-align: center">andThen<br />maxBy<br />minBy</td> </tr> <tr> <td style="text-align: center">Predicate<T></T></td> <td style="text-align: center">T</td> <td style="text-align: center">boolean</td> <td style="text-align: center">test</td> <td style="text-align: center">Boolean 값을 반환하는 함수다.</td> <td style="text-align: center">and<br />or<br />negate<br />isEqual</td> </tr> <tr> <td style="text-align: center">BiPredicate&lt;T, U&gt;</td> <td style="text-align: center">T, U</td> <td style="text-align: center">boolean</td> <td style="text-align: center">test</td> <td style="text-align: center">두 가지 인자를 받고 boolean 값을 반환하는 함수다.</td> <td style="text-align: center">and<br />or<br />negate</td> </tr> </tbody> </table> </div> </article> <div class="row"> <div id="disqus_thread"></div> <script defer> (function() { var d = document, s = d.createElement('script'); s.src = '//dolen.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> <div class="row"> <ul class="pager"> <li><a class="next" href="/java-stream/">&laquo; JAVA 8 스트림 (Stream)</a></li> <li><a class="previous" href="/java-lambda/">JAVA8 람다 표현식(Lambda Expression) &raquo;</a></li> </ul> </div> </div> <div id="post-navigator" class="col-md-4 mt20"> <div class="post-img"> <img width="600" src="/images/java.png" alt="JAVA8 메소드 레퍼런스(Method Reference)"> </div> <div class="mt10 recent"> <h4>Previous post</h4> <div> <p><a href="/java-lambda/">JAVA8 람다 표현식(Lambda Expression)</a> <small>&nbsp;&nbsp;10 Dec 2016</small> </p> </div> <h4>Next post</h4> <div> <p><a href="/java-stream/">JAVA 8 스트림 (Stream)</a> <small>&nbsp;&nbsp;17 Dec 2016</small> </p> </div> </div> <br> </div> <script> var MIN_WIDTH_OF_PC_VERSION = 992; var POST_SIDE_BAR_HEIGHT = 87; var POST_SIDE_BAR_PADDING_LEFT = 15; var POST_SIDE_BAR_MARGIN_TOP = 20; var CONTAINER_PADDING_LEFT = 20; var container = document.getElementById('container'); var post = document.getElementById('post'); var postNavigator = document.getElementById('post-navigator'); var postNavigatorWidth = postNavigator.offsetWidth; var postWidth = post.offsetWidth; var postMarginLeft = +window.getComputedStyle(container)['margin-left'].split('px')[0]; /** for getting scroll position Y **/ var supportPageOffset = window.pageXOffset !== undefined; var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat"); function setSidebarStyle (position, top, left, width) { Object.assign(postNavigator.style, { position: position, top: top, left: left, width: width }) } function onScroll () { var position = ''; var top = ''; var left = ''; var width = '33.33333333%'; if (document.body.offsetWidth < MIN_WIDTH_OF_PC_VERSION) { width = ''; } else { var y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop; if (y >= POST_SIDE_BAR_HEIGHT) { position = 'fixed'; top = POST_SIDE_BAR_MARGIN_TOP + 'px'; left = (postMarginLeft + postWidth + CONTAINER_PADDING_LEFT + POST_SIDE_BAR_PADDING_LEFT) + 'px'; width = postNavigatorWidth + 'px'; } } setSidebarStyle(position, top, left, width); } window.addEventListener('scroll', onScroll); window.addEventListener('resize', function () { postNavigatorWidth = postNavigator.offsetWidth; postWidth = post.offsetWidth; postMarginLeft = +window.getComputedStyle(container)['margin-left'].split('px')[0]; onScroll(); }); </script> </div> </div> </div> <footer> <div class="container"> <div class="row p20"> <div class="col-md-4 text-center mt25" > </div> <div class="col-md-4 text-center mt25"> <a target="_blank" href="https://www.facebook.com/taesan.choi"><li class="social facebook"><i class="fa fa-facebook-square"></i></li></a> <a target="_blank" href="http://github.com/imcts"><li class="social github"><i class="fa fa-github-square"></i></li></a> <a target="_blank" href="mailto:imcts@nate.com"><li class="social email"><i class="fa fa-envelope"></i></li></a> </div> </div> </div> </footer> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> <script src="/js/bootstrap.min.js"></script> <!-- Google Analytics Tracking code --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-83979019-1', 'auto'); ga('send', 'pageview'); </script> </body> </html>
