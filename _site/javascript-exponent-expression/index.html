<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>자바스크립트 숫자 표현 방식 | Dolen’s blog</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="자바스크립트 숫자 표현 방식" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="1. IEEE-754 자바스크립트는 [IEEE-754](https:// ko.wikipedia.org/wiki/IEEE_754)에 의거하여 정수와 부동소수점을 표기합니다. IEEE-754 표기법 중 32BIT를 사용하는 단정도와 64BIT를 사용하는 배정도방식이 존재하는데 자바스크립트는 배정도 방식을 사용하여 정수와 부동소수점을 표기합니다." /> <meta property="og:description" content="1. IEEE-754 자바스크립트는 [IEEE-754](https:// ko.wikipedia.org/wiki/IEEE_754)에 의거하여 정수와 부동소수점을 표기합니다. IEEE-754 표기법 중 32BIT를 사용하는 단정도와 64BIT를 사용하는 배정도방식이 존재하는데 자바스크립트는 배정도 방식을 사용하여 정수와 부동소수점을 표기합니다." /> <link rel="canonical" href="http://localhost:4000/javascript-exponent-expression/" /> <meta property="og:url" content="http://localhost:4000/javascript-exponent-expression/" /> <meta property="og:site_name" content="Dolen’s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-06-10T11:00:00+09:00" /> <script type="application/ld+json"> {"description":"1. IEEE-754 자바스크립트는 [IEEE-754](https:// ko.wikipedia.org/wiki/IEEE_754)에 의거하여 정수와 부동소수점을 표기합니다. IEEE-754 표기법 중 32BIT를 사용하는 단정도와 64BIT를 사용하는 배정도방식이 존재하는데 자바스크립트는 배정도 방식을 사용하여 정수와 부동소수점을 표기합니다.","@type":"BlogPosting","url":"http://localhost:4000/javascript-exponent-expression/","headline":"자바스크립트 숫자 표현 방식","dateModified":"2017-06-10T11:00:00+09:00","datePublished":"2017-06-10T11:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/javascript-exponent-expression/"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> --> <link rel="stylesheet" href="/css/main.css"> <link rel="alternate" type="application/rss+xml" title="Dolen's blog" href="http://localhost:4000/feed.xml"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> </head> <body> <header class="site-header"> <nav class="navbar navbar-default"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Dolen's blog</a> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1"> <ul class="nav navbar-nav navbar-right"> <li><a href="/about/">About</a></li> <li><a href="/contact/">Contact</a></li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav> </header> <div class="container"> <div class="wrapper"> <div class="row"> <div class="col-md-8"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">자바스크립트 숫자 표현 방식</h1> <p class="post-meta"><time datetime="2017-06-10T11:00:00+09:00" itemprop="datePublished">Jun 10, 2017</time></p> </header> <div class="post-content" itemprop="articleBody"> <h3 id="1-ieee-754">1. IEEE-754</h3> <p>자바스크립트는 <code class="highlighter-rouge">[IEEE-754](https:// ko.wikipedia.org/wiki/IEEE_754)</code>에 의거하여 정수와 부동소수점을 표기합니다.<br /> IEEE-754 표기법 중 32BIT를 사용하는 단정도와 64BIT를 사용하는 배정도방식이 존재하는데<br /> 자바스크립트는 배정도 방식을 사용하여 정수와 부동소수점을 표기합니다.</p> <h3 id="2-부호-비트-signed-bit">2. 부호 비트 (SIGNED BIT)</h3> <p>자바스크립트는 배정도방식으로 저장하지만 실제로 개발자가 비트연산등을 수행하여 값을 저장할때에는 32BIT 정수로 변환하여 연산을 수행한 뒤 64BIT로 다시 변환하여 저장합니다.<br /> 0000 0000 0000 0000 0000 0000 0000 0000(2) 의 비트값이 존재한다고 했을때 첫 번째 비트를 부호 표현을 위한 비트로 따로 지정하게 되는데 이를 부호 비트라고 칭합니다.<br /> 부호비트는 0일때 양수를 1일때 음수를 나타냅니다.</p> <h3 id="3-양수를-표현할때">3. 양수를 표현할때</h3> <p>먼저 정수를 저장하는 방법에 대해 알아보도록 하죠. 43이라는 값을 32비트로 저장하려면 먼저 2진수로 변환해야 합니다.<br /> <img src="/resources/images/javascript/jinsu-change.jpeg" alt="이미지" /> 이처럼 10진수 43을 2진수로 표현할 수 있고, 그를 8진수나 16진수등으로 변경할 수도 있습니다.<br /> 43이라는 정수값을 2진수로 변경하게 되면 101011(2)로 표기할 수 있고, 자바스크립트로 간단하게 사용하고자 한다면 toString을 사용하여 쉽게 구할 수도 있습니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">nubmer</span> <span class="o">=</span> <span class="mi">43</span><span class="p">..</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// 101011 </span>
</code></pre></div></div> <p>0000 0000 0000 0000 0000 0000 0010 1011(2) // 43(10) <br /> 0111 1111 1111 1111 1111 1111 1111 1111(2) // 2147483647(10)</p> <p>따라서 10진수 43을 32비트로 저장할때에는 위와 같이 저장되며, 양수 표현에서 최대한으로 저장할 수 있는 값은 +2147483647입니다.</p> <h3 id="3-음수를-표현할때">3. 음수를 표현할때</h3> <p>음수를 표현하는 방법은 여러가지 방법이 존재해왔습니다.</p> <p><img src="/resources/images/javascript/jinsu-complement.jpeg" alt="이미지" /></p> <p><code class="highlighter-rouge">부호 절대값 방법(Sign Magnitude)</code>: 부호 비트를 제외한 수를 양수값으로 읽고, 부호비트에 따라 + - 를 인식하는 방법입니다. (이진수 계산이 되지 않기 때문에 컴퓨터에서 사용하지 않습니다.)<br /> <br /> <code class="highlighter-rouge">1의 보수방법(1's Complement)</code>: 양수값의 비트를 반전시켜서 음수를 표현하는 방법입니다. 0은 1로 1은 0으로 변환합니다. (-0과 +0인 경우가 존재하기 때문에 컴퓨터에서 사용하지 않습니다.) <br /> <br /> <code class="highlighter-rouge">2의 보수 방법(2's Complement)</code>: 1의 보수값에 +1을 한 값을 사용하며, -0이 없어지기 때문에 이 방법으로 음수를 표현합니다.<br /> <br /> 이처럼 2의 보수방법을 취하는 음수 표현법에 따라 -43이라는 값은 이처럼 변환되게 됩니다.<br /> <br /> 0000 0000 0000 0000 0000 0000 0010 1011(2) // 43(10) <br /> 1111 1111 1111 1111 1111 1111 1101 0100(2) // 43(10) 의 1의 보수<br /> 1111 1111 1111 1111 1111 1111 1101 0101(2) // 43(10) 의 2의 보수<br /> <br /> 또한 보수의 개념이므로 43의 2진수값과 43의 2의 보수값을 더하면 0이 되는 것을 볼 수 있습니다. <br /> 양수의 최대값으로 표현할 수 있는 값은 2147483647이고 이를 2진수로 표현하면 <br /> 0111 1111 1111 1111 1111 1111 1111 1111(2) 이 됩니다. <br /> 하지만 음수는 양수보다 +1개만큼의 경우의 수를 더 포함하므로 음수로 표현할 수 있는 값은 2147483648이 됩니다.<br /> 이는 2진수로 표현하게 되면 1000 0000 0000 0000 0000 0000 0000 0000이 되는데요.</p> <p>1000 0000 0000 0000 0000 0000 0000 0000(2) // 2147483648(10)<br /> 0111 1111 1111 1111 1111 1111 1111 1111(2) // 2147483648(10)의 1의 보수<br /> 1000 0000 0000 0000 0000 0000 0000 0000(2) // 2147483648(10)의 2의 보수<br /></p> <p>위처럼 계산이 되므로 음수 표현에서 최대한으로 저장할 수 있는 정수의 값은 -2147483648(10)가 됩니다.</p> <h3 id="4-부동소수점-표기-방법">4. 부동소수점 표기 방법</h3> <p><code class="highlighter-rouge">부동 소수 표현식</code> <img src="/resources/images/javascript/math-float-screen.png" alt="이미지" /></p> <p><code class="highlighter-rouge">s(Sign)</code>: 부호비트를 나타냅니다. (양수일때: 0, 음수일때: 1)<br /> <code class="highlighter-rouge">M(Mantissa)</code>: 가수부를 나타냅니다. (유효숫자)<br /> <code class="highlighter-rouge">E(Exponent)</code>: 지수부를 나타냅니다.</p> <p><img src="/resources/images/javascript/IEEE-745-S-E-M.jpeg" alt="이미지" /></p> <p>단정도 방식에서는 <code class="highlighter-rouge">sign</code>비트를 1비트로 <code class="highlighter-rouge">Exponent</code>를 8비트로 <code class="highlighter-rouge">Mantissa</code>를 23비트로 표현합니다.<br /> 배정도 방식에서는 <code class="highlighter-rouge">sign</code>비트를 1비트로 <code class="highlighter-rouge">Exponent</code>를 11비트로 <code class="highlighter-rouge">Mantissa</code>를 52비트로 표현합니다.</p> <p>오늘은 43.6875라는 실수값이 어떻게 저장되는지에 대해 보도록 하겠습니다.</p> <p><img src="/resources/images/javascript/jinsu-change-2.jpeg" alt="이미지" /></p> <p>먼저 2진수로 변환하는 과정을 거쳐서 101011.1011(2)라는 값을 얻습니다.</p> <p><code class="highlighter-rouge">Sign</code>비트는 양수이므로 0이 됩니다.</p> <p><code class="highlighter-rouge">Exponent</code>를 구하기 위해 <code class="highlighter-rouge">정규화</code> 과정을 거칩니다.</p> <p><img src="/resources/images/javascript/normalization.jpeg" alt="이미지" /></p> <p><code class="highlighter-rouge">정규화</code>란 2진수의 제일 왼쪽의 값이 1이 나오도록 소수점을 이동시키는 지수표현 방법을 말합니다.</p> <p>정규화 과정을 마친 후 <code class="highlighter-rouge">매직넘버</code>를 구합니다.</p> <p><img src="/resources/images/javascript/magic-number.jpeg" alt="이미지" /></p> <p><code class="highlighter-rouge">매직넘버</code>란 지수부에 음수가 들어가지 않게 하기위해 더해주는 수로서, 정규화되어진 지수의 값 5와 매직넘버 127을 더한 값 10진수 132를 구합니다.<br /> 그 후 해당 수를 2진수로 변환하여 얻은 값 10000100(2)를 <code class="highlighter-rouge">Exponent</code>에 저장합니다.</p> <p><code class="highlighter-rouge">Mantissa</code>를 구하기 위해, 정규화된 값을 다시 한번 참조 합니다.</p> <p>43.6875(10)의 정규화된 값은 1.010111011 * (2 « 4) 입니다.</p> <p>지수부는 저장을 완료 하였으므로 가수부의 값을 저장하면 되는데, 반드시 정규화된 결과값의 맨 첫번째 자리는 1이므로 조금이라도 많이 저장하기 위해 앞자리 1은 생략 합니다.</p> <p><code class="highlighter-rouge">Mantissa</code>는 0101 1101 1000 0000 0000 000가 되며</p> <p>최종 결과값은 0 10000100 0101 1101 1000 0000 0000 000(2) 이 됩니다.</p> <h3 id="5-01--02--03">5. 0.1 + 0.2 !== 0.3</h3> <p>먼저 0.1을 2진수로 변환합니다.</p> <p>0.1(10) =&gt; 0.0001100110011001100110011001100110011001100110011001100110011…….(2) 0.2(10) =&gt; 0.0011001100110011001100110011001100110011001100110011001100110…….(2)</p> <p>그 후 정규화 과정을 거칩니다.</p> <p>0.1(10) =&gt; 1.1001 1001 1001 1001 1001 1001………(2) * - (2 « 3) // 2의 -4승<br /> 0.2(10) =&gt; 1.1001 1001 1001 1001 1001 1001………(2) * - (2 « 2) // 2의 -3승</p> <p>정규화 과정이 완료되면 위처럼 표기됩니다.</p> <p>그럼 이를 부동소수점 표기방식으로 저장해보도록 할게요.</p> <h4 id="01의-저장">0.1의 저장</h4> <p><code class="highlighter-rouge">Sign</code>은 양수이므로 0 입니다.<br /> <code class="highlighter-rouge">Exponent</code>는 -4 + 127 = 123(10) =&gt; 1111011(2) 입니다. <code class="highlighter-rouge">Mantissa</code>는 맨앞의 1을 제외하고 저장하므로 1001 1001 1001 1001 1001 101입니다.</p> <h4 id="02의-저장">0.2의 저장</h4> <p><code class="highlighter-rouge">Sign</code>은 양수이므로 0 입니다.<br /> <code class="highlighter-rouge">Exponent</code>는 -3 + 127 = 124(10) =&gt; 1111100(2) 입니다. <code class="highlighter-rouge">Mantissa</code>는 맨앞의 1을 제외하고 저장하므로 1001 1001 1001 1001 1001 101입니다.</p> <p><code class="highlighter-rouge">최종적으로 저장된 결과값</code><br /> <code class="highlighter-rouge">0.1 =&gt; 0 1111011 10011001100110011001101</code><br /> <code class="highlighter-rouge">0.2 =&gt; 0 1111100 10011001100110011001101</code></p> <p>최종 결과는 이렇습니다. 하지만 여기서 눈여겨 보셔야 할 부분이 있는데요, 바로 가수부분이 23자리로 저장되면서 반올림되었다는 점입니다.</p> <p>0.1과 0.2둘다 말이죠.</p> <p>그러면 다시 0.1 + 0.2의 연산을 처리하기 위해, 해당 값을 가져와서 연산해 보도록 합시다.</p> <p><code class="highlighter-rouge">0.1의 실수 변환</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// 0.1을 변환 </span>
    <span class="c1">// 먼저 가수부의 값을 가져와서 생략되어진 1을 추가합니다. 그리고 10진수로 변경합니다. </span>
    <span class="kd">var</span> <span class="nx">mantissa</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="s1">'1'</span> <span class="o">+</span> <span class="s1">'10011001100110011001101'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// 13421773</span>
    <span class="kd">var</span> <span class="nx">exponent</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="p">;</span>
    
    <span class="c1">// 그리고, 1.10011001100110011001101 이 아닌</span>
    <span class="c1">// 110011001100110011001101을 연산했으므로 -23의 지수가 추가됩니다. </span>
    <span class="nx">exponent</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">23</span><span class="p">;</span> 
    
    <span class="nx">mantissa</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">exponent</span><span class="p">);</span> 
    <span class="c1">// 7.450580596923828e-9 그리고 두 개의 값을 곱해줍니다.  </span>
    
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">mantissa</span> <span class="o">*</span> <span class="nx">exponent</span><span class="p">;</span> 
    <span class="c1">// 0.10000000149011612 의 결과값이 보입니다. </span>
</code></pre></div></div> <p><code class="highlighter-rouge">0.2의 실수 변환</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// 0.2을 변환 </span>
    <span class="c1">// 먼저 가수부의 값을 가져와서 생략되어진 1을 추가합니다. 그리고 10진수로 변경합니다. </span>
    <span class="kd">var</span> <span class="nx">mantissa</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="s1">'1'</span> <span class="o">+</span> <span class="s1">'10011001100110011001101'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// 13421773</span>
    <span class="kd">var</span> <span class="nx">exponent</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
    
    <span class="c1">// 그리고, 1.10011001100110011001101 이 아닌</span>
    <span class="c1">// 110011001100110011001101을 연산했으므로 -23의 지수가 추가됩니다. </span>
    <span class="nx">exponent</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">23</span><span class="p">;</span> 
    
    <span class="nx">mantissa</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">exponent</span><span class="p">);</span> 
    <span class="c1">// 1.4901161193847656e-8 그리고 두 개의 값을 곱해줍니다.  </span>
    
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">mantissa</span> <span class="o">*</span> <span class="nx">exponent</span><span class="p">;</span> 
    <span class="c1">// 0.20000000298023224 의 결과값이 보입니다. </span>
</code></pre></div></div> <p><code class="highlighter-rouge">0.1 + 0.2 의 결과</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nx">number1</span> <span class="o">=</span> <span class="mf">0.10000000149011612</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">number2</span> <span class="o">=</span> <span class="mf">0.20000000298023224</span><span class="p">;</span> 
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">number1</span> <span class="o">+</span> <span class="nx">number2</span><span class="p">);</span> <span class="c1">// 0.30000000447034836 </span>
</code></pre></div></div> <p><code class="highlighter-rouge">대처방안</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nx">number1</span> <span class="o">=</span> <span class="mf">0.10000000149011612</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">number2</span> <span class="o">=</span> <span class="mf">0.20000000298023224</span><span class="p">;</span> 
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="nx">number1</span> <span class="o">+</span> <span class="nx">number2</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// 0.3</span>
</code></pre></div></div> <p>따라서, 0.1 + 0.2의 결과값은 다를 수 밖에 없습니다. 이를 유의하여 사용할때에는 소수점을 고정시키는 방법을 고려해야 합니다.</p> <p>부동소수점 표현방식이었습니다.</p> </div> </article> <div class="row"> <div id="disqus_thread"></div> <script defer> (function() { var d = document, s = d.createElement('script'); s.src = '//dolen.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> <div class="row"> <ul class="pager"> <li><a class="next" href="/box-model-and-position/">&laquo; CSS position, box-model</a></li> <li><a class="previous" href="/ES6-Reflection/">ES6 - REFLECTION &raquo;</a></li> </ul> </div> </div> <div class="col-md-4 mt20"> <div class="post-img"> <img width="600" src="/images/javascript.jpg" alt="자바스크립트 숫자 표현 방식"> </div> <div class="mt10 recent"> <h4>Previous post</h4> <div> <p><a href="/ES6-Reflection/">ES6 - REFLECTION</a> <small>&nbsp;&nbsp;13 Jan 2017</small> </p> </div> <h4>Next post</h4> <div> <p><a href="/box-model-and-position/">CSS position, box-model</a> <small>&nbsp;&nbsp;11 May 2018</small> </p> </div> </div> <br> </div> </div> </div> </div> <footer> <div class="container"> <div class="row p20"> <div class="col-md-4 text-center mt25" > </div> <div class="col-md-4 text-center mt25"> <a target="_blank" href="https://www.facebook.com/taesan.choi"><li class="social facebook"><i class="fa fa-facebook-square"></i></li></a> <a target="_blank" href="http://github.com/imcts"><li class="social github"><i class="fa fa-github-square"></i></li></a> <a target="_blank" href="mailto:imcts@nate.com"><li class="social email"><i class="fa fa-envelope"></i></li></a> </div> </div> </div> </footer> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> <script src="/js/bootstrap.min.js"></script> <!-- Google Analytics Tracking code --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-83979019-1', 'auto'); ga('send', 'pageview'); </script> </body> </html>
