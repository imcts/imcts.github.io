body, html {
  width: 100%;
  height: 100%;
  padding: 0;
  border: 0;
  box-sizing: border-box
}

table {
  text-align: center;
}

thead {
  width: 100%
}

$COUNT_OF_CLASSES: 6;
$ATTENDANCE_ON: '1';
$ATTENDANCE_OFF: '0';

@function getAttendanceCombination ($str, $attendances) {
  @if (str-length($str) == $COUNT_OF_CLASSES) {
    $attendances: append($attendances, $str);
    @return $attendances;
  }

  $attendances: getAttendanceCombination($str + $ATTENDANCE_ON, $attendances);
  $attendances: getAttendanceCombination($str + $ATTENDANCE_OFF, $attendances);
  @return $attendances;
}

@function isAllAttendance ($attendanceCombination) {
  $classesLength: str-length($attendanceCombination);
  @for $i from 1 through $classesLength {
    $attendance: str-slice($attendanceCombination, $i, $i);
    @if ($attendance != $ATTENDANCE_ON) {
      @return false;
    }
  }
  @return true;
}

@function isNotAllAttendance ($attendanceCombination) {
  $classesLength: str-length($attendanceCombination);
  @for $i from 1 through $classesLength {
    $attendance: str-slice($attendanceCombination, $i, $i);
    @if ($attendance != $ATTENDANCE_OFF) {
      @return false;
    }
  }
  @return true;
}

@each $attendanceCombination in getAttendanceCombination('', ()) {
  $props: '';
  $color: '';
  $classesLength: str-length($attendanceCombination);

  @for $j from 1 through $classesLength {
    $attendance: str-slice($attendanceCombination, $j, $j);
    $isAttendance: $attendance == $ATTENDANCE_ON;

    @if ($isAttendance) {
      $props: $props + '[data-' + $j + '="on"]';
    } @else {
      $props: $props + '[data-' + $j + '="off"]';
    }

    @if ($j != $classesLength) {
      $props: $props + '+';
    } @else {
      $props: $props + '+ td';
    }
  }

  @if (isAllAttendance($attendanceCombination)) {
    $color: green;
  } @else if (isNotAllAttendance($attendanceCombination)){
    $color: red;
  } @else {
    $color: yellow;
  }

  #{$props} {
    background: $color;
  }
}
